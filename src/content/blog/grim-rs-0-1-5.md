---
title: "grim-rs v0.1.5 - バッファ安全性とメモリピーク削減"
description: "v0.1.5 ではバッファサイズ計算の安全化、PNG/JPEG エンコードのピークメモリ削減、依存関係と MSRV の更新を行いました。"
pubDate: 2026-02-06
tags: ["grim-rs", "wayland", "linux", "rust", "release"]
draft: false
lang: ja
---

> 注: v0.1.5 のリリース日は **2026年2月6日** です。

このバージョンでは、キャプチャとスケーリング時のバッファ取り扱いの安全性を向上し、不要なコピーを削除して PNG/JPEG エンコード時のピーク割り当てを削減しました。依存関係と Rust の最小サポートバージョンを更新し、テストを整理し、再現可能な測定手順を備えた明確なプロファイリングマニュアルを追加しました。

## ざっくりまとめ

- グローバルなピクセル上限付きの安全なバッファサイズ計算。
- PNG/JPEG エンコード時のピークメモリ削減。
- 依存関係更新と MSRV の変更（Rust 1.68）、テスト整理、プロファイリング手順書の追加。

## 主な改善点

### バッファ安全性

キャプチャ、スケーリング、合成でチェック付きサイズ計算を導入し、オーバーフローや OOM のリスクを抑えました。

### エンコード時のメモリ削減

RGBA バッファからのエンコードで冗長なフルフレームコピーを排除し、大きな画像でのピーク割り当てを削減しました。

### メンテナンスとドキュメント

依存関係を更新し、MSRV を Rust 1.68 に引き上げ、`tests/` スイートへの移行でテストを整理しました。さらに、`doc/profiling_manual.md` に再現可能な測定手順をまとめたプロファイリングガイドを追加しました。

## リンク

- リポジトリ: https://github.com/shikoucore/grim-rs
- CHANGELOG: https://github.com/shikoucore/grim-rs/blob/master/CHANGELOG.md
